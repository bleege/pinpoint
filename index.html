<html>
<head>
	<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
	<meta charset=utf-8 />
	<title>Pin Point</title>
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
	<link href='http://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
	<script src='http://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
</head>

<body>

<div id='contentBox' class='note contain fill-light'>
	<div class="pad2">
		<table>
			<thead>
				<tr>
					<th>Latitude</th>
					<th>&nbsp;</th>
					<th>Longitude</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td id="latText"></td>
					<td>&nbsp;</td>
					<td id="lonText"></td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<div id="map"></div>

<script type="text/javascript">
	var map = L.mapbox.map('map', 'bleege.gnbp044n', {
		doubleClickZoom: false
	});
	var marker = L.marker(new L.LatLng(43.07471879831505, -89.3842077255249), {
		icon: L.mapbox.marker.icon({'marker-color': 'CC0000'}),
		draggable: true
	});
	marker.addTo(map);
	displayLatLon(marker.getLatLng());

	marker.on('dragend', function(event) {
		var loc = event.target.getLatLng();
		displayLatLon(loc);
	});

	function displayLatLon(latLon) {
		document.getElementById('latText').innerHTML = latLon.lat.toFixed(5);
		document.getElementById('lonText').innerHTML = latLon.lng.toFixed(5);
	}

	// Add Geocoder
	var geocoder = L.mapbox.geocoderControl('bleege.gnbp044n');
	map.addControl(geocoder);

	// Autoselect result.data.results[0][0] -> 3; get 0 and lat, lon
	// Select result.data[0] = city; lat, lon
	geocoder.on('select', function(result) {
//		alert("Found - result = '" + result.data + "'");
		marker.setLatLng(new L.LatLng(result.data[0].lat, result.data[0].lon))
		displayLatLon(marker.getLatLng());
	});

	geocoder.on('autoselect', function(result) {
//		alert("Found - result = '" + result.data + "'");
		marker.setLatLng(new L.LatLng(result.data.results[0][0].lat, result.data.results[0][0].lon))
		displayLatLon(marker.getLatLng());
	})


	// Move Marker On Double Click Of Map
	map.on('dblclick', function(event) {
		marker.setLatLng(event.latlng);
		displayLatLon(marker.getLatLng());
	});

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36024845-2', 'bleege.github.io');
  ga('send', 'pageview');

</script>

</body>

</html>